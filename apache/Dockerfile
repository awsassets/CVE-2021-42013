# Based on Debian 10 (Buster)
FROM httpd:2.4.49
# Copy config to directory 
COPY ./conf/httpd.conf /usr/local/apache2/conf/httpd.conf
# Add environment variable
ENV DEBIAN_FRONTEND=noninteractive
# Install services, packages and do cleanup
RUN apt update \
    && apt install -y curl \
    && apt install -y git \
    && apt install -y iproute2 \
    && apt install -y iputils-ping \
    && apt install -y lsof \
    && apt install -y net-tools \
    && apt install -y netcat \
    && apt install -y sudo \
    && rm -rf /var/lib/apt/lists/*
# Add user 'sysadmin' with password 'sysadmin123'
RUN useradd sysadmin -s /bin/bash -G sudo -p $(openssl passwd -1 sysadmin123)
# Copy index.html to root directory of web and default Apache
COPY ./web/index.html /var/www/html/
COPY ./web/index.html /usr/local/apache2/htdocs/
# Readyyy
CMD ["httpd-foreground"]